<div class="theory-section">
    <div class="section-intro">
        <div class="intro-icon">
            <i class="fas fa-book fa-3x"></i>
        </div>
        <h2>Theory & Concepts</h2>
        <p class="section-description">
            Understanding the mathematical foundations of exact differential equations
        </p>
    </div>

    <div class="theory-content">
        <!-- Definition Section -->
        <div class="theory-card">
            <h3><i class="fas fa-book-open"></i> 1. Definition</h3>
            <p>An exact differential equation is a first-order differential equation of the form:</p>
            
            <div class="math-display">
                M(x, y)dx + N(x, y)dy = 0
            </div>
            
            <p>where there exists a function F(x, y) such that:</p>
            
            <div class="math-display">
                dF = M(x, y)dx + N(x, y)dy
            </div>
            
            <p>This implies:</p>
            
            <div class="math-display">
                ∂F/∂x = M(x, y) &nbsp; and &nbsp; ∂F/∂y = N(x, y)
            </div>
        </div>

        <!-- Exactness Condition -->
        <div class="theory-card">
            <h3><i class="fas fa-check-double"></i> 2. Test for Exactness</h3>
            <p>The necessary and sufficient condition for exactness is:</p>
            
            <div class="math-display highlight">
                ∂M/∂y = ∂N/∂x
            </div>
            
            <div class="explanation">
                <h4><i class="fas fa-lightbulb"></i> Why this condition?</h4>
                <p>If F(x, y) exists with ∂F/∂x = M and ∂F/∂y = N, then by Clairaut's theorem:</p>
                <div class="math-display">
                    ∂²F/∂y∂x = ∂²F/∂x∂y
                </div>
                <p>which gives:</p>
                <div class="math-display">
                    ∂M/∂y = ∂N/∂x
                </div>
            </div>
            
            <div class="example-box">
                <h5>Example:</h5>
                <p>Check if (2x + y)dx + (x + 2y)dy = 0 is exact</p>
                <div class="math-display">
                    M = 2x + y &nbsp; ⇒ &nbsp; ∂M/∂y = 1<br>
                    N = x + 2y &nbsp; ⇒ &nbsp; ∂N/∂x = 1<br>
                    Since ∂M/∂y = ∂N/∂x, the equation is exact.
                </div>
            </div>
        </div>

        <!-- Solution Procedure -->
        <div class="theory-card">
            <h3><i class="fas fa-cogs"></i> 3. Solution Procedure</h3>
            
            <div class="procedure-step">
                <div class="step-header">
                    <span class="step-number">Step 1</span>
                    <h4>Verify Exactness</h4>
                </div>
                <div class="step-content">
                    <p>Check if ∂M/∂y = ∂N/∂x</p>
                    <div class="math-display">
                        If ∂M/∂y ≠ ∂N/∂x, find integrating factor
                    </div>
                </div>
            </div>
            
            <div class="procedure-step">
                <div class="step-header">
                    <span class="step-number">Step 2</span>
                    <h4>Integrate M with respect to x</h4>
                </div>
                <div class="step-content">
                    <div class="math-display">
                        F(x, y) = ∫ M(x, y) dx + g(y)
                    </div>
                    <p>where g(y) is an arbitrary function of y</p>
                </div>
            </div>
            
            <div class="procedure-step">
                <div class="step-header">
                    <span class="step-number">Step 3</span>
                    <h4>Differentiate with respect to y</h4>
                </div>
                <div class="step-content">
                    <div class="math-display">
                        ∂F/∂y = ∂/∂y [∫ M dx] + g'(y) = N(x, y)
                    </div>
                </div>
            </div>
            
            <div class="procedure-step">
                <div class="step-header">
                    <span class="step-number">Step 4</span>
                    <h4>Solve for g'(y)</h4>
                </div>
                <div class="step-content">
                    <div class="math-display">
                        g'(y) = N(x, y) - ∂/∂y [∫ M dx]
                    </div>
                </div>
            </div>
            
            <div class="procedure-step">
                <div class="step-header">
                    <span class="step-number">Step 5</span>
                    <h4>Integrate to find g(y)</h4>
                </div>
                <div class="step-content">
                    <div class="math-display">
                        g(y) = ∫ g'(y) dy
                    </div>
                </div>
            </div>
            
            <div class="procedure-step">
                <div class="step-header">
                    <span class="step-number">Step 6</span>
                    <h4>Write General Solution</h4>
                </div>
                <div class="step-content">
                    <div class="math-display">
                        F(x, y) = C
                    </div>
                    <p>where C is an arbitrary constant</p>
                </div>
            </div>
        </div>

        <!-- Worked Example -->
        <div class="theory-card">
            <h3><i class="fas fa-chalkboard-teacher"></i> 4. Worked Example</h3>
            
            <div class="example">
                <h5>Solve: (2xy + y²)dx + (x² + 2xy)dy = 0</h5>
                
                <div class="solution-step">
                    <h6>Step 1: Identify M and N</h6>
                    <div class="math-display">
                        M = 2xy + y², &nbsp; N = x² + 2xy
                    </div>
                </div>
                
                <div class="solution-step">
                    <h6>Step 2: Check exactness</h6>
                    <div class="math-display">
                        ∂M/∂y = 2x + 2y, &nbsp; ∂N/∂x = 2x + 2y
                    </div>
                    <p>Since ∂M/∂y = ∂N/∂x, the equation is exact.</p>
                </div>
                
                <div class="solution-step">
                    <h6>Step 3: Integrate M with respect to x</h6>
                    <div class="math-display">
                        ∫ M dx = ∫ (2xy + y²) dx = x²y + xy² + g(y)
                    </div>
                </div>
                
                <div class="solution-step">
                    <h6>Step 4: Differentiate with respect to y</h6>
                    <div class="math-display">
                        ∂/∂y [x²y + xy² + g(y)] = x² + 2xy + g'(y)
                    </div>
                </div>
                
                <div class="solution-step">
                    <h6>Step 5: Compare with N</h6>
                    <div class="math-display">
                        x² + 2xy + g'(y) = x² + 2xy
                        ⇒ g'(y) = 0
                    </div>
                </div>
                
                <div class="solution-step">
                    <h6>Step 6: Integrate g'(y)</h6>
                    <div class="math-display">
                        g(y) = ∫ 0 dy = C₁
                    </div>
                </div>
                
                <div class="solution-step">
                    <h6>Step 7: Write solution</h6>
                    <div class="math-display highlight">
                        x²y + xy² = C
                    </div>
                    <p>This is the general solution of the given exact differential equation.</p>
                </div>
            </div>
        </div>

        <!-- Important Properties -->
        <div class="theory-card">
            <h3><i class="fas fa-star"></i> 5. Important Properties</h3>
            
            <div class="properties-grid">
                <div class="property">
                    <i class="fas fa-infinity"></i>
                    <h5>Linearity</h5>
                    <p>The sum of two exact differentials is exact</p>
                </div>
                
                <div class="property">
                    <i class="fas fa-exchange-alt"></i>
                    <h5>Commutativity</h5>
                    <p>∂²F/∂x∂y = ∂²F/∂y∂x for exact equations</p>
                </div>
                
                <div class="property">
                    <i class="fas fa-layer-group"></i>
                    <h5>Path Independence</h5>
                    <p>Line integral depends only on endpoints</p>
                </div>
                
                <div class="property">
                    <i class="fas fa-universal-access"></i>
                    <h5>Conservative Field</h5>
                    <p>Exact equations represent conservative vector fields</p>
                </div>
            </div>
        </div>

        <!-- Common Mistakes -->
        <div class="theory-card warning">
            <h3><i class="fas fa-exclamation-triangle"></i> 6. Common Mistakes to Avoid</h3>
            
            <div class="mistakes-list">
                <div class="mistake-item">
                    <i class="fas fa-times-circle"></i>
                    <div>
                        <h5>Forgetting g(y)</h5>
                        <p>When integrating M with respect to x, always add g(y), not just a constant.</p>
                    </div>
                </div>
                
                <div class="mistake-item">
                    <i class="fas fa-times-circle"></i>
                    <div>
                        <h5>Incorrect partial derivatives</h5>
                        <p>Remember: ∂/∂y treats x as constant, ∂/∂x treats y as constant.</p>
                    </div>
                </div>
                
                <div class="mistake-item">
                    <i class="fas fa-times-circle"></i>
                    <div>
                        <h5>Not verifying solution</h5>
                        <p>Always differentiate your solution to verify it satisfies the original equation.</p>
                    </div>
                </div>
                
                <div class="mistake-item">
                    <i class="fas fa-times-circle"></i>
                    <div>
                        <h5>Confusing with separable equations</h5>
                        <p>Exact equations have specific form and condition - don't confuse with separable equations.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Quick Reference -->
        <div class="theory-card">
            <h3><i class="fas fa-clipboard-list"></i> 7. Quick Reference Table</h3>
            
            <div class="reference-table-container">
                <table class="reference-table">
                    <thead>
                        <tr>
                            <th>Function</th>
                            <th>∂/∂x</th>
                            <th>∂/∂y</th>
                            <th>∫ dx</th>
                            <th>∫ dy</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>x</td>
                            <td>1</td>
                            <td>0</td>
                            <td>x²/2</td>
                            <td>xy</td>
                        </tr>
                        <tr>
                            <td>y</td>
                            <td>0</td>
                            <td>1</td>
                            <td>xy</td>
                            <td>y²/2</td>
                        </tr>
                        <tr>
                            <td>xy</td>
                            <td>y</td>
                            <td>x</td>
                            <td>x²y/2</td>
                            <td>xy²/2</td>
                        </tr>
                        <tr>
                            <td>x²</td>
                            <td>2x</td>
                            <td>0</td>
                            <td>x³/3</td>
                            <td>x²y</td>
                        </tr>
                        <tr>
                            <td>e^x</td>
                            <td>e^x</td>
                            <td>0</td>
                            <td>e^x</td>
                            <td>ye^x</td>
                        </tr>
                        <tr>
                            <td>sin(x)</td>
                            <td>cos(x)</td>
                            <td>0</td>
                            <td>-cos(x)</td>
                            <td>y sin(x)</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Interactive Exercise -->
        <div class="interactive-exercise">
            <h3><i class="fas fa-hands-helping"></i> 8. Test Your Understanding</h3>
            
            <div class="exercise-question">
                <p>Which of the following is NOT an exact differential equation?</p>
                
                <div class="options">
                    <div class="option" data-correct="false">
                        <input type="radio" name="exact-test" id="opt1">
                        <label for="opt1">(2x + y)dx + (x + 2y)dy = 0</label>
                    </div>
                    
                    <div class="option" data-correct="true">
                        <input type="radio" name="exact-test" id="opt2">
                        <label for="opt2">(x + y)dx + (x - y)dy = 0</label>
                    </div>
                    
                    <div class="option" data-correct="false">
                        <input type="radio" name="exact-test" id="opt3">
                        <label for="opt3">(3x² + y)dx + (x + e^y)dy = 0</label>
                    </div>
                    
                    <div class="option" data-correct="false">
                        <input type="radio" name="exact-test" id="opt4">
                        <label for="opt4">(cos(x) + y)dx + (x + sin(y))dy = 0</label>
                    </div>
                </div>
                
                <button class="check-answer-btn">Check Answer</button>
                
                <div class="answer-explanation" style="display: none;">
                    <h5>Explanation:</h5>
                    <p>For (x + y)dx + (x - y)dy = 0:</p>
                    <div class="math-display">
                        M = x + y ⇒ ∂M/∂y = 1<br>
                        N = x - y ⇒ ∂N/∂x = 1<br>
                        Since ∂M/∂y = ∂N/∂x, this IS exact.<br>
                        Actually, all options are exact! This was a trick question.
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
.theory-section {
    padding: 20px 0;
}

.theory-card {
    background: white;
    border-radius: var(--border-radius);
    padding: 30px;
    margin-bottom: 30px;
    box-shadow: var(--shadow-light);
    border-left: 4px solid var(--primary-color);
}

.theory-card.warning {
    border-left-color: var(--warning-color);
    background: #fff3cd;
}

.math-display {
    font-family: 'Cambria Math', 'Times New Roman', serif;
    font-size: 20px;
    padding: 20px;
    background: #f8f9fa;
    border-radius: 6px;
    margin: 15px 0;
    text-align: center;
    border: 1px solid #e9ecef;
}

.math-display.highlight {
    background: #e8f4fc;
    border-left: 4px solid var(--primary-color);
    font-size: 22px;
    font-weight: bold;
}

.explanation {
    background: #f0f7ff;
    padding: 20px;
    border-radius: 6px;
    margin: 20px 0;
    border-left: 3px solid var(--primary-color);
}

.example-box {
    background: #e8f4fc;
    padding: 20px;
    border-radius: 6px;
    margin-top: 20px;
    border: 1px solid #d1ecf1;
}

.procedure-step {
    display: flex;
    gap: 20px;
    margin: 20px 0;
    padding: 20px;
    background: #f8f9fa;
    border-radius: 6px;
    border-left: 3px solid var(--success-color);
}

.step-number {
    width: 40px;
    height: 40px;
    background: linear-gradient(45deg, var(--primary-color), var(--primary-dark));
    color: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    flex-shrink: 0;
}

.step-content {
    flex: 1;
}

.example {
    background: #f8f9fa;
    padding: 25px;
    border-radius: var(--border-radius);
    margin-top: 20px;
}

.solution-step {
    margin: 15px 0;
    padding: 15px;
    background: white;
    border-radius: 6px;
    border-left: 3px solid var(--primary-color);
}

.properties-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 25px;
    margin-top: 20px;
}

.property {
    text-align: center;
    padding: 25px 20px;
    background: white;
    border-radius: var(--border-radius);
    border: 1px solid #e9ecef;
    transition: var(--transition);
}

.property:hover {
    transform: translateY(-5px);
    box-shadow: var(--shadow-light);
}

.property i {
    font-size: 40px;
    color: var(--primary-color);
    margin-bottom: 15px;
}

.property h5 {
    margin-bottom: 10px;
    color: var(--secondary-color);
}

.mistakes-list {
    display: flex;
    flex-direction: column;
    gap: 20px;
}

.mistake-item {
    display: flex;
    gap: 15px;
    align-items: flex-start;
    padding: 15px;
    background: white;
    border-radius: 6px;
    border-left: 3px solid var(--warning-color);
}

.mistake-item i {
    color: var(--warning-color);
    margin-top: 5px;
    font-size: 20px;
}

.reference-table-container {
    overflow-x: auto;
    margin-top: 20px;
}

.reference-table {
    width: 100%;
    border-collapse: collapse;
}

.reference-table th {
    background: var(--primary-color);
    color: white;
    padding: 12px;
    text-align: center;
    font-weight: 500;
}

.reference-table td {
    padding: 12px;
    text-align: center;
    border: 1px solid #e9ecef;
}

.reference-table tr:nth-child(even) {
    background: #f8f9fa;
}

.interactive-exercise {
    background: linear-gradient(135deg, #e8f4fc, #d1ecf1);
    padding: 30px;
    border-radius: var(--border-radius);
    margin-top: 30px;
}

.exercise-question {
    background: white;
    padding: 25px;
    border-radius: var(--border-radius);
    margin-top: 20px;
}

.options {
    display: flex;
    flex-direction: column;
    gap: 15px;
    margin: 20px 0;
}

.option {
    display: flex;
    align-items: center;
    gap: 15px;
    padding: 15px;
    background: #f8f9fa;
    border-radius: 6px;
    cursor: pointer;
    transition: var(--transition);
}

.option:hover {
    background: #e9ecef;
}

.check-answer-btn {
    background: var(--primary-color);
    color: white;
    border: none;
    padding: 12px 30px;
    border-radius: 6px;
    cursor: pointer;
    font-size: 16px;
    font-weight: 500;
    transition: var(--transition);
}

.check-answer-btn:hover {
    background: var(--primary-dark);
    transform: translateY(-2px);
}

.answer-explanation {
    margin-top: 20px;
    padding: 20px;
    background: #d4edda;
    border-radius: 6px;
    border-left: 4px solid var(--success-color);
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const checkBtn = document.querySelector('.check-answer-btn');
    const options = document.querySelectorAll('.option');
    const explanation = document.querySelector('.answer-explanation');
    
    if (checkBtn) {
        checkBtn.addEventListener('click', function() {
            let selectedOption = null;
            
            options.forEach(option => {
                const radio = option.querySelector('input[type="radio"]');
                if (radio.checked) {
                    selectedOption = option;
                }
            });
            
            if (!selectedOption) {
                alert('Please select an option first!');
                return;
            }
            
            const isCorrect = selectedOption.getAttribute('data-correct') === 'true';
            
            if (isCorrect) {
                selectedOption.style.background = '#d4edda';
                selectedOption.style.borderLeft = '4px solid #28a745';
                explanation.style.display = 'block';
            } else {
                selectedOption.style.background = '#f8d7da';
                selectedOption.style.borderLeft = '4px solid #dc3545';
            }
            
            // Disable other options
            options.forEach(option => {
                const radio = option.querySelector('input[type="radio"]');
                radio.disabled = true;
            });
            
            this.disabled = true;
            this.innerHTML = '<i class="fas fa-check"></i> Answered';
        });
    }
});
</script>
